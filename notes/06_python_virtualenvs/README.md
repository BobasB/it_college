# Віртуальні середовища
> Ізольовані віртуальні середовища - це сукупність Python інтерпретатора, бібліотек та скриптів ізольована від інших інсталяцій. Віртуальні середовища в Python дозволяють створювати ізольовані простори для проєктів, забезпечуючи незалежність від глобальних налаштувань та залежностей. Це особливо корисно при роботі з різними проєктами, які можуть вимагати різних версій бібліотек.

---
### Основи роботи з сторонніми бібліотеками
1. Для роботи з сторонніми бібліотеками їх потрібно спочатку встановити. Для їх встановлення є інструмент PIP (`Python Install Package`). Перевірте чи він встановлений на компютері:
    ```bash
    pip -V
    # Після успішного виконання команди виконайте
    pip --help
    ``` 
1. :star: Передивіться які дії можна зробити за допомогою `pip`. Перевірте які бібліотеки вже інстальовані на Вашому компютері та вкажіть їх у звіті (скріншот або стрічки що вивелись);
1. Будь-яку сторонню бібліотеку можна встановити на комп'ютер за допомогою `pip install` команди та зразу почати її використовувати, наприклад встановимо бібліотеку [requests](https://requests.readthedocs.io/en/latest/):
    ```bash
    pip install requests
    python #Зайдіть в пайтон інтерпретатор
    >>> import requests
    >>> r = requests.get('https://google.com')
    >>> r.status_code
    >>> exit()
    ```
1. :star: Вставте у звіт результат виконання команд (скріншот або стрічки що вивелись);
1. :star: Ознайомтесь які ще методи є в бібліотеці [requests, та спробуйте їх використати](https://requests.readthedocs.io/en/latest/user/quickstart/);
1. Даний спосіб інсталяції робить бібліотеку загальнодоступною для даної системи. Будь-яке оновлення бібліотеки буде застосоване до всіх Python проектів на Вашому комп'ютері;
    ```bash
    pip show requests
    pip install requests==2.1
    pip show requests
    pip uninstall requests
    ```
1. :star: Вкажіть у звіті результат виконання команд.
1. :star: Для любителів Аніме, можна поекспериментувати з бібліотекою [jikanpy](https://pypi.org/project/jikanpy-v4/) яка є АПІ для роботи з [Аніме сайтом  MyAnimeList.net](https://myanimelist.net/) та запустити наступний код який веведе оцінки епізодів Аніме серіалу;
    ```python
    from flask import Flask, render_template
    from jikanpy import Jikan

    jikan = Jikan()
    app = Flask(__name__)

    j = jikan.anime(54595, extension='episodes')

    @app.route('/')
    def home():
        a = str()
        for episode in j["data"]: 
            a += f"<p>Епізод {episode['mal_id']} з назвою: {episode['title']} має оцінку {episode['score']}<p>"
        return a

    @app.route('/about')
    def about():
        return render_template('about.html')

    if __name__ == '__main__':
        app.run(debug=True)
    ```
1. :star: Запустіть програму вище та вкажіть у робуті результат її виконання;

---
### Робота у віртуальному середовищі 
1. [Віртуальні середовища в Python](https://docs.python.org/3/library/venv.html) - це ізольовані середовища для роботи з 'замороженою' версією Python та його бібліотек. Середовище створюється для кожного проекту окремо і буде мати ті самі характеристики в не залежності де та на якій системі буде запущено;
1. Для створення `VENV` та його активації виконайте команди:
    ```bash
    python -m venv ./my_env
    source my_env/Scripts/activate
    pip install requests
    deactivate
    pip show requests
    ```
1. :star: Вкажіть у звіті що вивела остання команда та чому?
1. :fire: Всі створені файли НЕ потрібно комітити в репозиторій. Щоб уникнути такого автоматично створіть файл `.gitignore` у кореневій папці та вкажіть в ньому папки які потрібно ігнорувати.

---
### Робота з Pipenv
1. [Pipenv](https://pipenv.pypa.io/en/latest/) - це інструмент для спрощення інсталяції сторонніх бібліотек та створення віруального середовища для кожного проекту. Для його інсталяції застосуйте команду:
    ```bash
    pip install pipenv
    # Після успішного виконання команди виконайте
    pipenv --help
    ``` 
1. :star: Вкажіть у звіті які команди можна виконувати за допомогою `pipenv`;
1. Для створення нового середовища та інсталяції бібліотек виконайте наступні команди:
    ```bash
    pipenv --python 3.10
    pipenv --venv
    pipenv run python -V
    pipenv install requests
    ```
1. :star: Переконайтесь що у Вас створились файли `Pipfile` та `Pipfile.lock`. Що в них знаходиться?
1. Створіть пайтон файл та запишіть в нього наступну програму:
    ```python
    import requests

    response = requests.get('https://httpbin.org/')
    for line in response.iter_lines():
        print(line)
    ```
1. :star: Спробуйте запустити програму з Visual Studio. Запустіть програму з командної стрічки. Запустіть програму зайшовши у віртуальне середовище за допомогою команди `pipenv shell`. Результати запишіть у звіт.
1. :star: Виберіть якусь бібліотеку на [Pypi](https://pypi.org/) та спробуйте її інсталювати. Знайдіть документацію цієї бібліотека та спробуйте виконати якісь приклади.
1. Visual Studio дозволяє змінити Python інтерпретатор для запуску через кнопку `Run` (трикутник :arrow_forward:). Для цього викличіть командну палітру з меню `View -> Command Palette...` та в ній наберіть `Python: Select interpreter`. Якщо у Вас вже є інстальоване віртуальне середовище, Visual Studio відобразить всі доступні інтерпретатори.
1. :star: Змініть інтерпретатор Python із Вашого середовища та виконайте скрипт через кнопку `Run`. Представте результат у звіті.

---
### Робота зі змінними середовища
1. Середовища також можна параметризувати за допомогою змінних середовища (*Environment Variables*). Для цього у папці повинен буди файл `.env` із заданими змінними у форматі `KEY=VALUE`. Pipenv автоматично розпізнає ці файли та робить їх доступними всередині середовища. Створіть файл `.env` та виконайте наступний код:
```python
import os
os.environ['HELLO']
```
1. :star: Що буде якщо виконати скрипт без активації віртуального середовища?

---
### Робота з Poetry
1. [poetry](https://python-poetry.org/docs/) — це сучасний інструмент для керування залежностями та пакетами в Python, який автоматично створює та керує віртуальними середовищами у проєктах.
1. Щоб створити новий проєкт, використовуйте команду:
    ```bash
    poetry new myproject
    ```
    - або якщо у вас вже є проєкт, ініціалізуйте `poetry` в його директорії:
    ```bash
    cd myproject
    poetry init
    ```
1. Для встановлення пакетів Python, наприклад, `requests`, потрібно виконати:
    ```bash
    poetry add requests
    ```
        Це додасть бібліотеку до файлу `pyproject.toml` та встановить її у віртуальне середовище.
    - Щоб побачити список усіх встановлених залежностей у вашому проєкті, виконайте:
    ```bash
    poetry show
    ```
    - Для детального перегляду залежностей з їхніми версіями та описами використовуйте:

    ```bash
    poetry show --tree
    ```
    - Щоб видалити залежність з проєкту, використовуйте команду:

    ```bash
    poetry remove <package_name>
    ```
        Це видалить пакет з файлу `pyproject.toml` та оновить віртуальне середовище.
    - Щоб оновити всі залежності до їхніх останніх сумісних версій, використовуйте команду:

    ```bash
    poetry update
    ```
        Це оновить пакети відповідно до обмежень, зазначених у файлі `pyproject.toml`, та оновить файл `poetry.lock` з новими версіями.
1. :star: Вкажіть у звіті результат виконання команд.
1. Для того щоб активувати середовище проекту потрібно виконати наступні команди:
    ```bash
    poetry shell
    # Для виконання команд без активації середовища використовуйте:
    poetry run <command>
    # для пеервірки сеердовища виконайте
    poetry env list
    poetry env info
    ```
1. Якщо потрібно створити декілька груп з різними пакетами, виконується команда:
    ```bash
    poetry add --dev pytest flake8 black isort mypy
    ```
    Для рприкладу дані бібліокети виконують роль Лінтерів та статичних перевірок коду які потрібно лише на стадії розробки проекту, тому вони знаходяться у секції `--dev`.
1. :star: За допомогою АІ створіть програму для цього проекту та запустіть її у віртуальному середовищі створеному а допомогою `poetry`.

---
### Допомога ChatGPT
1. За допомогою штучного інтелекту ми можемо швидко написати прості програми або вирішити певні задачі. Запитайтесь у АІ як написати простий web сайт з використанням бібліотеки `Flask` яку потрібно встановити у віртуальному середовищі а також використати код програми написаний у попередніх завданнях цієї роботи як вивід для однієї з веб сторінок.

---
### Здача роботи
- :star: коли робота завершена та всі файли завантажено до репозиторію перейдіть у Веб-браузер та скопіюйте URL посилання на вашу роботу;
- :star: відправте URL посилання як відповідь на запитання до завдання у Google Classroom;
- :star: після того як Викладач перевірить роботу, Ви отримаєте оцінку у Google Classroom;

---
